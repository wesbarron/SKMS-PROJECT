{% extends "site-skeleton.html" %}

{% block body %}
<style>
  .carousel-control-next,
.carousel-control-prev /*, .carousel-indicators */ {
    filter: invert(100%);
}
</style>
<div class="container p-5 d-flex justify-content-center">
  
  <div id="DashboardCarousel" class="carousel slide " data-ride="carousel"  data-interval="8000">

    <div class="carousel-inner bg-secondary-subtle rounded-5 "   >
      <div class="carousel-item px-5 mx-5 py-2 active">
        <div class="data-security row m-4">
          
          <div class="desc col-12">
            <h4>Cybersecurity</h4>
            
            <p>
              Cybersecurity is a critical issue that affects everyone. As technology continues to advance and more data is stored and processed digitally, 
              it's essential that we take steps to protect our digital assets from cyber threats. By implementing effective cybersecurity measures, we can 
              reduce the risk of cyberattacks and protect our sensitive information from unauthorized access. 
              <br />
              Cybersecurity is the practice of protecting computer systems, networks, and sensitive information from unauthorized access, theft, damage, or 
              other malicious attacks. It is important because cyberattacks can result in data breaches, financial losses, reputational damage, and even physical harm. 
              Effective cybersecurity requires a multi-layered approach that includes both technical and non-technical controls. By implementing effective cybersecurity 
              measures, we can reduce the risk of cyberattacks and protect our sensitive information from unauthorized access.
              
             </p>
             
          </div>
          <div class="d-flex justify-content-around">
            <div style="width: 50%;">
              <h5 class="text-center">Data Breaches from 2018-2022 Grouped by Organization</h5>
              <canvas id="breachesByOrgChart" ></canvas>
              </div>
           <div>
            <img style="width: 100%;" src="/media/cybersecurity.svg" alt="SVG Image">
           </div>
          </div>
          
          <div class="stats" hidden>
            <p>In 2022, the total damage by cyberattacks reached $6 trillion. </p>
            <p>The cybersecurity market is expected to grow to $300 billion by 2024.</p>
            <p>The US governmentâ€™s 2019 budget for cybersecurity is $15 billion.</p>
            <p>Phishing accounts for 37% of all cyberattacks directed toward businesses.</p>
            <p>More than 90% of successful attacks against businesses originate from phishing.</p>
          </div>
        </div>
      </div>
      <div class="carousel-item px-5 mx-5 py-2">
        <div class="zero-day-data row justify-content-around m-4">
          <div class="desc col-12 m-3 p-3">
              <h4>What are Zero-Day Attacks?</h4>
              <p>The term "Zero-Day" refers to the short amount of time that a corporation has to fix the flaw that led to the attack.
                  The term infers a high level attack that is crucial for the organization to both prevent from happening while also having a plan of action when an attack occurs.
                  Corporations take these attacks very seriously because consequences can be drastic. 
                  To read more about zero-day attacks and exploitation, read more on <a class="link-info" href="https://usa.kaspersky.com/resource-center/definitions/zero-day-exploit">kasperysky's</a> article on the subject.
              </p>
          </div>
          <div class="col-6">
              <h5 class="text-center">Total Number of Zero-Day Attacks Recorded Over Last 10 Years</h5>
              <canvas id="yearlyZeroDayAttackChart" ></canvas>
              </div>
          <div class="col">
                  <h5 class="text-center">Type of Zero-Day Attacks</h5>
                  <canvas id="zeroDayAttackChart" ></canvas>
      
              </div>
              
      </div>
      </div>

      <div class="carousel-item px-5 mx-5 py-2">
        <div class="ransomware-data row m-4">
          <div class="desc">
            <h4>Ransomware</h4>
            <p><a href="https://dataprot.net/statistics/cyber-security-statistics/" class="text-info">A ransomware attack happens every 14 seconds.</a> 
            </p>
          </div>
         <div class="col-6">
          <h5 class="text-center">Industries That Reported Ransom Attacks in 2021 in North America</h5>
          <canvas id="RansomwareIndustriesChart"></canvas>
         </div>
         <div class="col-6">
          <div>
            <h5 class="text-center">Cost of Ransomware Attacks</h5>
          <canvas id="RansomCostByDowntimeChart"></canvas>
          </div>
          <div>
            <canvas id="RansomCostByIncidentChart"></canvas>
          </div>
          
         </div>
          
        </div>
      </div>
      
      
      
    </div>
    <p class="small muted">Statistics Provided By <a class="link-info" href="https://purplesec.us/resources/cyber-security-statistics">purplesec</a></p>
    <a class="carousel-control-next" href="#DashboardCarousel" role="button" data-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
    <a class="carousel-control-prev" href="#DashboardCarousel" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Prev</span>
    </a>
  </div>
  <div class="links bg-secondary-subtle border-1 rounded-5 px-4 py-4 mx-5 col-3" style="height: 800px;">
    <h3>Useful Links</h3>
    <div>
      <p></p>
      <ul>
        <li><a href="https://www.sans.org/" class="link-primary">SANS Institute</a> - Cybersecurity Training Courses</li>
        <li><a href="https://www.nist.gov/" class="link-primary">NIST</a> - National Institute of Standards and Technology
          <ul><li>For online security standards and best practices</li></ul></li>
        
        <li><a href="https://www.nsa.gov/Cybersecurity/" class="link-primary">NSA</a> - National Security Agency
          <ul><li>Resources for Cybersecurity Guidance on Threat Prevention</li></ul></li>
        <li><a href="https://www.pcisecuritystandards.org/" class="link-primary">PCI DSS</a> - Credit Card Data Standards</li>
        <li><a href="https://www.hhs.gov/hipaa/index.html" class="link-primary" >HIPAA</a> - Health Insurance Portability and Accountability Act
          <ul><li>Medical Record Data Protections</li></ul></li>
      </ul>
    </div>
  </div>
    
</div>
  <!-- <div class="card-text-center m-5">
        {% csrf_token %}
        <iframe width="640" height="480"  scrolling="no" frameborder="0" src="http://digitalattackmap.com/embedv2#anim=1&color=0&country=ALL&list=0&time=18763&view=map"></iframe>
    </div> -->
    
    <div class='tableauPlaceholder' id='viz1680525051586' style='position: relative'>
        <noscript><a href='https:&#47;&#47;privacyrights.org&#47;data-breaches'>
            <img alt='Key Insights - Breach by Type ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Da&#47;DataBreachChronologyDashboard&#47;KeyInsights-BreachbyType&#47;1_rss.png' style='border: none' /></a>
        </noscript>
        <object class='tableauViz'  style='display:none;'><param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' /> 
            <param name='embed_code_version' value='3' /> <param name='site_root' value='' />
            <param name='name' value='DataBreachChronologyDashboard&#47;KeyInsights-BreachbyType' />
            <param name='tabs' value='no' /><param name='toolbar' value='yes' />
            <param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Da&#47;DataBreachChronologyDashboard&#47;KeyInsights-BreachbyType&#47;1.png' /> 
            <param name='animate_transition' value='yes' /><param name='display_static_image' value='yes' />
            <param name='display_spinner' value='yes' /><param name='display_overlay' value='yes' /><param name='display_count' value='yes' />
            <param name='language' value='en-US' /></object></div>                
            <script type='text/javascript'>                    
                var divElement = document.getElementById('viz1680525051586');                    
                var vizElement = divElement.getElementsByTagName('object')[0];                    
                if ( divElement.offsetWidth > 800 ) { vizElement.style.width='1200px';vizElement.style.height='827px';} 
                else if ( divElement.offsetWidth > 500 ) { vizElement.style.width='1200px';vizElement.style.height='827px';} 
                else { vizElement.style.width='100%';vizElement.style.height='2027px';}                     
                var scriptElement = document.createElement('script');                    
                scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';                    
                vizElement.parentNode.insertBefore(scriptElement, vizElement);                
            </script>
    </div>

    <div class="card text-center m-5">
        <div class="card-header">
            <h2>Threat Activities Report</h2>
            <form method="POST">
            {% csrf_token %}
            <label>Threat Search: </label> <input type="text" id="threatSearch" name="threatSearch" value="{{ threat_search }}" placeholder="Type Threat Here">
            <input type="submit" value="Search">
            </form>
        </div>
    <canvas id="myChart"></canvas>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="C:\Users\Wes\Documents\SKMS-PROJECT\skmsapp\templates\dashboard.js"></script>

    <script>

       var sourceLabel = [], scoreLabel = [] 
        
       async function vulnerabilityChart() {
        await getThreatData()

            let ctx = document.getElementById('myChart');
            new Chart(ctx, {
            type: 'bar',
            data: {
                    labels: sourceLabel,
                    datasets: [{
                    label: 'Exploitable Score',
                    data: scoreLabel,
                    //borderWidth: 1
                }]
            },
            options: {
                tooltips: {
                    mode: 'index'
                }
            }
            }); 
        }
        vulnerabilityChart()
        //Fetch Threat Activities Report
        async function getThreatData(){ 
            var searchKey = document.getElementById("threatSearch").value; 
            console.log(searchKey);
            const apiUrl = "https://services.nvd.nist.gov/rest/json/cves/2.0?keywordSearch="+searchKey+"";

            const response = await fetch(apiUrl);
            const barChartData = await response.json();
            const count = barChartData.vulnerabilities.length;
            let score;
            for (i = 0; i < count; i++){
            //     //const descriptions = barChartData.vulnerabilities[i].cve.descriptions[0].value
                try{
                    score = barChartData.vulnerabilities[i].cve.metrics.cvssMetricV2[0].exploitabilityScore;
                    
                    scoreLabel.push(Math.round(score));
                    
                    //console.log(Math.round(score))
                }
                catch(err){
                    console.log(err);
                    scoreLabel.push(1);
                }
            }
            const entity = barChartData.vulnerabilities.map( (x) => x.cve.sourceIdentifier);
            sourceLabel = entity;
            //const score = barChartData.vulnerabilities.map( (x) => x.cve.metrics.cvssMetricV2)
            //console.log(scoreLabel)
           //console.log(score)
        }


    </script>

{% endblock%}

{%block script%}

  
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  
  <script> //Yearly Zero Day Attack Chart (line)
    const chart1 = document.getElementById('yearlyZeroDayAttackChart');
  //https://purplesec.us/resources/cyber-security-statistics/#Cybercrime
    new Chart(chart1, {
      type: 'line',
      data: {
        labels: ['2011', '2012', '2013', '2014', '2015', '2015','2016','2017','2018','2019','2020','2021'],
        datasets: [{
          label: '# of Zero Days',
          data: [28, 25, 41, 34, 34, 35, 34, 40, 31, 29, 38, 66],
          borderWidth: 1
        }]
      },
      options: {
        scales: {
          y: {
            beginAtZero: true
          }
        }
      },
    });
  </script>
  
<script>//Zero Day Attack Chart (doughnut)
  const chart2 = document.getElementById('zeroDayAttackChart');
  //https://purplesec.us/resources/cyber-security-statistics/#Cybercrime
    new Chart(chart2, {
      type: 'doughnut',
      data: {
        labels: [
    'Memory Corruption',
    'Logic/Design Flaw',
    'Information Leak',
    'User-After-Free',
    'Other',
  ],
  datasets: [{
    data: [127, 26, 11, 6, 7],
    backgroundColor: [
      'rgb(255, 99, 132)',
      'rgb(54, 162, 235)',
      'rgb(255, 205, 86)',
      'rgb(96, 145, 77)',
      'rgb(100, 115, 227)'
    ],
    hoverOffset: 4
  }]
      },

      options: {
        responsive: true,
        radius: "80%",
      }
      
    });
  </script>

<script>//Ransomware Industries Chart (pie)
  const chart3 = document.getElementById('RansomwareIndustriesChart');
  //https://purplesec.us/resources/cyber-security-statistics/#Cybercrime
    new Chart(chart3, {
      type: 'pie',
      data: {
        labels: [
    'Corporations',
    'Municipality',
    'Healthcare',
    'Education',
    'Infrastructure',
    'Travel',
    'Financial',
  ],
  datasets: [{
    data: [40, 16, 13, 13, 11, 4, 3],
    backgroundColor: [
      '#9b5fe0',
      '#16a4d8',
      '#60dbe8',
      '#8bd346',
      '#efdf48',
      '#f9a52c',
      '#d64e12'
    ],
    hoverOffset: 4
  }]
      },

      options: {
        responsive: true,
        
      }
      
    });
  </script>
<script>//Ransom Cost by Downtime Chart (line)
  const chart4 = document.getElementById('RansomCostByDowntimeChart');
  //https://purplesec.us/resources/cyber-security-statistics/#Cybercrime
    new Chart(chart4, {
      type: 'line',
      data: {
        labels: [
    '2018',
    '2019',
    '2020',
  ],
  datasets: [{
    label: 'Average Cost of Downtime Caused by Ransomware per Incident',
    data: [46800, 141000, 283000],
    fill: false,
    borderColor: 'rgb(75, 192, 192)',
    tension: 0.1
  }]
      },

      options: {
        responsive: true,
        
      }
      
    });
  </script>
<script>//Ransom Cost By Incident Chart (line)
  const chart5 = document.getElementById('RansomCostByIncidentChart');
  //https://purplesec.us/resources/cyber-security-statistics/#Cybercrime
    new Chart(chart5, {
      type: 'line',
      data: {
        labels: [
    '2018',
    '2019',
    '2020',
  ],
  datasets: [{
    label: 'Average Cost of Ransomware per Incident',
    data: [4300, 5900, 8100],
    fill: false,
    borderColor: 'rgb(50, 168, 82)',
    tension: 0.1
  }]
      },

      options: {
        responsive: true,
        
      }
      
    });
  </script>
  <script> //Breaches by Organization Chart (bar)
    const chart6 = document.getElementById('breachesByOrgChart');
  //https://purplesec.us/resources/cyber-security-statistics/#Cybercrime
    new Chart(chart6, {
      type: 'bar',
      data: {
        labels: ['Finance, Bank, Insurance', 'Tech, Manufacturing, Comm, Other', 'Retail/Merchant', 'Education', 'Government', 'Healthcare','Nonprofit','Unknown'],
        datasets: [{
          backgroundColor: ['#0074D9','#F3722C','#F8961E','#F9C74F','#90BE6D','#43AA8B','#577590','#5D5D5A'],
          data: [2166, 2147, 764, 654, 266, 3223, 185, 2127],
          borderWidth: 1
        }]
      },
      options: {
        plugins: {
          legend:{
            display: false
          }
        },
        scales: {
          y: {
            beginAtZero: true
          }
        }
      },
    });
  </script>
{%endblock%}